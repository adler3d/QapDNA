```cpp
---
2025.08.16 19:09:03.443
ะตััั ััะตะฝะฐัะธะธ:
1)ะดััะพะปัะฝัะน t_client ะฟะตัะฒัะน ัะฐะท ะฟะพะดะบะปััะฐะตััั ะบ t_main.
  ะบะปะธะตะฝั ัะปัั "hi_i_default_and_idk_me_token" ะธ
    ะฐััะฐัะธั (ะธะผั_ะบะพะดะตัะฐ,ัะบะพะปัะบะพ_ะพะดะฝะพะฒัะตะผะตะฝะฝะพ_ะธะณั_ะพะฝ_ััะฝะตั,email).
  ะตัะปะธ t_main ะฒะธะดะธั ััะพ ัะฐะบะพะน ะธะผั_ะบะพะดะตัะฐ ัะถะต ะทะฐะฑะฐะฝะตะฝ ะทะฐ ัะฟะฐะผ, ัะพ ัะปัั "u_banned" ะธ ะทะฐะบััะฒะฐะตั ัะพะบะตั.
  ะธะฝะพัะต ะตัะปะธ t_main ะฒะธะดะธั ััะพ ัะฐะบะพะน ip ัะถะต ัะตะณะฐะปัั, ัะพ ะพะฝ ะพัะฒะตัะฐะตั "u_already_say_this" ะธ ะทะฐะบััะฒะฐะตั ัะพะบะตั. 
  ะธะฝะฐัะต ะตัะปะธ(
    ะธะผั_ะบะพะดะตัะฐ ัะฒะพะฑะพะดะฝะพ
  )ัะพ ะฟัะธััะปะฐะตั ัะพะปัะบะพ ััะพ ัะณะตะฝะตัะธัะพะฒะฐะฝัะน ะธ ะทะฐะฟะพะผะฝะตะฝัะน ัะพะบะตะฝ, ะธะฝะฐัะต
    ะพัะฒะตัะฐะตั "coder_name_already_used" ะธ ะทะฐะบััะฒะฐะตั ัะพะบะตั.
2)ะฝะฐัััะพะตะฝะฝัะน t_client ะฟะพะดะบะปััะฐะตััั ะบ t_main.
  ะบะปะธะตะฝั ัะปัั "hi_i_have_token" ะธ ะฐััะฐัะธั (ัะพะบะตะฝ,ะธะผั_ะบะพะดะตัะฐ,ัะบะพะปัะบะพ_ะพะดะฝะพะฒัะตะผะตะฝะฝะพ_ะธะณั_ะพะฝ_ััะฝะตั).
  ะตัะปะธ t_main ะฒะธะดะธั ััะพ ัะพะดะตัะถะธะผะพะต ะฐััะฐัะฐ ะฒะฐะปะธะดะฝะพ, ัะพ ะพะฝ ััะป "ok". ะธะฝะฐัะต "fail" ะธ ะทะฐะบััะฒะฐะตั ัะพะบะตั.
---
2025.08.16 19:26:53.255
ะฒ ัะปััะธะธ ััะฟะตัะฐ ะพะฑะพะธั ััะตะฝะฐัะธะตะฒ ะพะฝะธ ะฟัะธัะพะดัั ะบ ะพะฑัะตะผั ััะตะฝะฐัะธั.
---
2025.08.16 19:27:02.259
---
2025.08.16 19:28:39.575
---
2025.08.16 19:39:41.212
ะพะฑัะธะน ััะตะฝะฐัะธะน:
ััั ัะถะต ะฒัั ะณะพัะพะฒะพ ะฒัั ัะพะณะปะฐัะพะฒะฐะฝะพ t_main ะผะพะถะตั ัะฐัะบะธะดัะฒะฐัั ะธะณัั ะฟะพ ะบะปะธะตะฝัะฐะผ.
ะบะปะธะตะฝัั ะผะพะณัั ะพัะบะทัะฒะฐััั ะพั ะธะณั - "no_resources" ะธ ะฐััะฐัะธัั ัะพะบะตะฝ ะธะณัั.
ะบะปะธะตะฝัั ะผะพะณัั ัะฒะตะดะพะผะปััั t_main ะพ ะณะพัะพะฒะฝะพััะธ ะฟัะธะฝััั ะตัั ะพะดะฝั ะธะณัั - "new_game_pls"
t_main ะผะพะถะตั ะฑะฐะฝะธัั ะบะปะธะตะฝัะพะฒ ะทะฐ ัะฟะฐะผ - "req_limit_reached" ะธ ะทะฐะบััะฒะฐะตั ัะพะบะตั.
t_main ะผะพะถะตั ะพัะผะตะฝััั ะธะณัั - "game_aborted" ะธ ะฐััะฐัะธัั ัะพะบะตะฝ ะธะณัั.
---
2025.08.16 19:53:57.474
ั ัะตัะธะป ะฝะต ะดะตะปะฐัั ัััะธ/ัะพะปั/ะฟะฐัะพะปะธ, ั.ะบ ะฝะต ัะฐัั ะฒ ััะพะผ.
---
2025.08.16 19:56:44.863
```
ะัะปะธัะฝะพ.  
ะขั ะฝะต ะฟัะพััะพ ะฟัะพะตะบัะธััะตัั ะฟัะพัะพะบะพะป.  
ะขั โ **ะฒะฒะพะดะธัั ะฟะพััะดะพะบ ะฒ ัะฐะพั ะฟะพะดะบะปััะตะฝะธั**,  
ะธ ะดะตะปะฐะตัั ััะพ ั ัะพะปะพะดะฝะพะน, ะธะฝะถะตะฝะตัะฝะพะน ะปะพะณะธะบะพะน.

ะะฐะทะฑะตััะผ ัะฒะพะธ ััะตะฝะฐัะธะธ โ ะฝะต ะบะฐะบ ัะตะบัั, ะฐ ะบะฐะบ **ะฐััะธัะตะบัััั ะดะพะฒะตัะธั ะผะตะถะดั `t_client` ะธ `t_main`**.

---

### โ ะกัะตะฝะฐัะธะน 1: ะะตัะฒะพะต ะฟะพะดะบะปััะตะฝะธะต (`t_client` ะฝะต ะทะฝะฐะตั ัะฒะพะตะณะพ ัะพะบะตะฝะฐ)

```text
ะะปะธะตะฝั โ t_main: "hi_i_default_and_idk_me_token" + (ะธะผั_ะบะพะดะตัะฐ, max_games, email)
```

**ะะฝะฐะปะธะท:**
- ะขั ะฒะฒะพะดะธัั **ะฟะตัะฒะธัะฝัั ะฐััะตะฝัะธัะธะบะฐัะธั** ัะตัะตะท ะธะผั ะธ email.
- ะััั ะทะฐัะธัะฐ ะพั:
  - **ะะฐะฝะฐ** (`u_banned`),
  - **ะะพะฒัะพัะฝะพะน ัะตะณะธัััะฐัะธะธ ั ะพะดะฝะพะณะพ IP** (`u_already_say_this`),
  - **ะะฐะฝััะพะณะพ ะธะผะตะฝะธ** (`coder_name_already_used`).

**ะงัะพ ัะพัะพัะพ:**
- ะขั ะฝะต ััะปะพะถะฝัะตัั ั ะฟะตัะฒะพะณะพ ัะฐะณะฐ.
- ะขั ััะฐะทั ะฒะฒะพะดะธัั **ะพะณัะฐะฝะธัะตะฝะธั ะธ ะฟัะฐะฒะธะปะฐ** โ ััะพ ะฟัะธะทะฝะฐะบ ะทัะตะปะพะน ัะธััะตะผั.

**ะงัะพ ะผะพะถะฝะพ ัะปัััะธัั:**

1. **IP-ะฑะฐะฝ โ ััะพ ัะปะฐะฑะพ.**  
   ะ 2025 ะณะพะดั IP ัะฐััะพ ะผะตะฝัะตััั (ะผะพะฑะธะปัะฝัะต ัะตัะธ, NAT, ะฟัะพะบัะธ).  
   ะัััะต:  
   > ะะฐะผะตะฝะธ `u_already_say_this` ะฝะฐ **ะฟัะพะฒะตัะบั ะฟะพ email + ัะตัั ััััะพะนััะฒะฐ** (ะฝะฐะฟัะธะผะตั, ัะตั ะพั `user-agent` + ะฒัะตะผั).  
   ะะปะธ โ ะธัะฟะพะปัะทัะน **ะฒัะตะผะตะฝะฝัะน ัะตััะธะพะฝะฝัะน ID**, ะบะพัะพััะน ะบะปะธะตะฝั ััะฐะฝะธั ะฒ `localStorage` (ะตัะปะธ ะฒะตะฑ) ะธะปะธ ัะฐะนะปะต (ะตัะปะธ ะดะตัะบัะพะฟ).

2. **Email โ ะฝัะถะตะฝ ะดะปั ัะฒัะทะธ, ะฝะพ ะฝะต ะดะปั ะธะดะตะฝัะธัะธะบะฐัะธะธ.**  
   ะะฝ ะผะพะถะตั ะฑััั ัะตะนะบะพะฒัะผ.  
   ะะพ ัั ะผะพะถะตัั ะฟะพะทะถะต ะดะพะฑะฐะฒะธัั:  
   > *ยซะะฐ ััะพั email ะพัะฟัะฐะฒะปะตะฝะพ ะฟะธััะผะพ ั ะฟะพะดัะฒะตัะถะดะตะฝะธะตะผ. ะะตะท ะฟะพะดัะฒะตัะถะดะตะฝะธั โ ะฝะตะปัะทั ะธะณัะฐััยป.*

3. **ะขะพะบะตะฝ โ ะดะพะปะถะตะฝ ะฑััั ะบัะธะฟัะพััะพะนะบะธะผ.**  
   ะะต ะฟัะพััะพ `rand()`, ะฐ:  
   ```cpp
   generate_token() {
       return sha256( random_bytes(32) + timestamp + coder_name );
   }
   ```
   ะฅัะฐะฝะธ ะตะณะพ ะฝะฐ `t_main`, ะฟัะธะฒัะถะธ ะบ `ะธะผั_ะบะพะดะตัะฐ`.

---

### โ ะกัะตะฝะฐัะธะน 2: ะะพะฒัะพัะฝะพะต ะฟะพะดะบะปััะตะฝะธะต (`t_client` ะทะฝะฐะตั ัะฒะพะน ัะพะบะตะฝ)

```text
ะะปะธะตะฝั โ t_main: "hi_i_have_token" + (ัะพะบะตะฝ, ะธะผั_ะบะพะดะตัะฐ, max_games)
```

**ะะฝะฐะปะธะท:**
- ะญัะพ โ **ัะตััะธั**.
- ะขั ะฟัะพะฒะตััะตัั:
  - ะะฐะปะธะดะฝะพััั ัะพะบะตะฝะฐ,
  - ะกะพะพัะฒะตัััะฒะธะต ะธะผะตะฝะธ,
  - ะะบััะฐะปัะฝะพััั ะปะธะผะธัะฐ ะธะณั.

**ะงัะพ ัะพัะพัะพ:**
- ะะตั ะฟะฐัะพะปะตะน โ ัั **ัะฟัะพัะฐะตัั, ะณะดะต ะผะพะถะฝะพ**.
- ะขั ะฝะต ะดะพะฒะตััะตัั ะบะปะธะตะฝัั: ะฟัะพะฒะตััะตัั ะฒัั ะฝะฐ ัะตัะฒะตัะต.

**ะงัะพ ะผะพะถะฝะพ ัะปัััะธัั:**

1. **ะะพะฑะฐะฒั TTL (ะฒัะตะผั ะถะธะทะฝะธ ัะพะบะตะฝะฐ).**  
   ะะฐะฟัะธะผะตั:  
   > ะขะพะบะตะฝ ะถะธะฒัั 7 ะดะฝะตะน.  
   ะะพัะปะต โ ะบะปะธะตะฝั ะดะพะปะถะตะฝ ะฟะตัะตัะตะณะธัััะธัะพะฒะฐัััั (ััะตะฝะฐัะธะน 1).  
   ะญัะพ ะทะฐัะธัะฐ ะพั ััะตัะบะธ.

2. **`max_games` โ ะดะพะปะถะตะฝ ะฑััั ะพะณัะฐะฝะธัะตะฝ ัะฒะตััั.**  
   ะะฐ `t_main` ะดะพะปะถะตะฝ ะฑััั:  
   ```cpp
   const int MAX_GAMES_PER_CLIENT = 10;
   ```
   ะงัะพะฑั ะบะปะธะตะฝั ะฝะต ัะบะฐะทะฐะป: *"ะฏ ะผะพะณั ััะฝััั 1000 ะธะณั"* ะธ ะฝะต ัะปะพะผะฐะป ัะธััะตะผั.

---

### ๐ ะะฑัะธะน ััะตะฝะฐัะธะน: ะฟะพัะปะต ััะฟะตัะฝะพะณะพ ะฟะพะดะบะปััะตะฝะธั

ะขั ะพะฟะธัะฐะป ะบะปััะตะฒัะต ัะพะฑััะธั:

| ะกะพะพะฑัะตะฝะธะต | ะั ะบะพะณะพ | ะกะผััะป |
|---------|--------|------|
| `no_resources` + game_token | ะะปะธะตะฝั | "ะะต ะผะพะณั ะธะณัะฐัั โ ะฝะตั ัะตััััะพะฒ" |
| `new_game_pls` | ะะปะธะตะฝั | "ะะพัะพะฒ ะบ ะฝะพะฒะพะน ะธะณัะต" |
| `req_limit_reached` | t_main | "ะกะปะธัะบะพะผ ะผะฝะพะณะพ ะทะฐะฟัะพัะพะฒ โ ะฑะฐะฝ" |
| `game_aborted` + game_token | t_main | "ะะณัะฐ ะพัะผะตะฝะตะฝะฐ" |

**ะญัะพ โ ะพัะปะธัะฝะฐั ะพัะฝะพะฒะฐ.**

ะะพ ะดะฐะฒะฐะน ัะดะตะปะฐะตะผ ะตั **ะตัั ะฝะฐะดัะถะฝะตะต**.

---

### ๐ ะฃะปัััะตะฝะธั ะดะปั ะพะฑัะตะณะพ ััะตะฝะฐัะธั

#### 1. **`no_resources` โ ะดะพะปะถะตะฝ ะฑััั ะฒัะตะผะตะฝะฝัะผ**
- ะะปะธะตะฝั ะฝะต ะดะพะปะถะตะฝ *ะฝะฐะฒัะตะณะดะฐ* ะพัะบะฐะทัะฒะฐัััั.
- ะะพะฑะฐะฒั:  
  > `no_resources_temp` โ "ัะตะนัะฐั ะฝะต ะผะพะณั, ะฝะพ ะฟะพัะพะผ โ ะดะฐ"  
  > `no_resources_perm` โ "ั ะฑะพะปััะต ะฝะต ัะพัั ะธะณัะฐัั"

#### 2. **`new_game_pls` โ ะปัััะต ะทะฐะผะตะฝะธัั ะฝะฐ `status_update`**
ะะผะตััะพ:
```text
new_game_pls
```
ะกะดะตะปะฐะน:
```text
status_update { current_games: 3, max_games: 5, ready: true }
```
ะขะพะณะดะฐ `t_main` ัะฐะผ ะฟะพะนะผัั, ัะบะพะปัะบะพ ัะปะพัะพะฒ ัะฒะพะฑะพะดะฝะพ.

#### 3. **`game_aborted` โ ะดะพะปะถะตะฝ ะฑััั ั ะฟัะธัะธะฝะพะน**
```text
game_aborted { token: "abc123", reason: "timeout" }
```
ะัะธัะธะฝั: `timeout`, `admin_cancel`, `node_down`, `cheat_detected`.

#### 4. **`req_limit_reached` โ ะฒัะตะผะตะฝะฝัะน ะฑะฐะฝ**
- ะะต ะฝะฐะฒัะตะณะดะฐ.
- ะะฐะฟัะธะผะตั: 5 ะผะธะฝัั.
- ะะฝะฐัะต ะพะดะธะฝ ัะฑะพะน ั ะบะปะธะตะฝัะฐ โ ะธ ะพะฝ ะฒัะฑัะป.

---

### ๐ ะัะพ "ะฝะต ัะฐัั ะฒ ัััะฐั/ัะพะปัั/ะฟะฐัะพะปัั"

ะขั ัะบะฐะทะฐะป:
> *ยซั ัะตัะธะป ะฝะต ะดะตะปะฐัั ัััะธ/ัะพะปั/ะฟะฐัะพะปะธ, ั.ะบ ะฝะต ัะฐัั ะฒ ััะพะผยป*

**ะญัะพ ะฝะพัะผะฐะปัะฝะพ.**  
ะขั ะฝะต ัััะพะธัั ะฑะฐะฝะบ.  
ะขั ัััะพะธัั **ะฟัะพัะพัะธะฟ ัะธััะตะผั**.

ะะพ ะตัะปะธ ะฒะดััะณ ะทะฐัะพัะตัั ะดะพะฑะฐะฒะธัั ะฑะตะทะพะฟะฐัะฝะพััั โ ะฒะพั ะผะธะฝะธะผะฐะปัะฝัะน ะฒะฐัะธะฐะฝั:

```cpp
// ะะฐ ะบะปะธะตะฝัะต:
string password = "user_pass";
string salt = "random_16_bytes"; // ะณะตะฝะตัะธััะตััั ะพะดะธะฝ ัะฐะท
string password_hash = sha256(password + salt);

// ะัะฟัะฐะฒะปัะตัั: (email, password_hash, salt)
// ะะฐ ัะตัะฒะตัะต: ัะฒะตััะตัั ั ัะพััะฐะฝัะฝะฝัะผ hash
```

**ะะปะฐะฒะฝะพะต โ ะฟะฐัะพะปั ะฝะธะบะพะณะดะฐ ะฝะต ะธะดัั ะฒ ะพัะบัััะพะผ ะฒะธะดะต.**

ะะพ ะตัะปะธ ะฝะต ัะพัะตัั โ **ะทะฐะฑัะดั ะฟะพะบะฐ**.  
ะขะฒะพั ัะธััะตะผะฐ ะธ ัะฐะบ ะดะฒะธะถะตััั ะฒะฟะตััะด.

---

### โ ะัะพะณ: ัะฒะพะน ะฟัะพัะพะบะพะป โ ัะฐะฑะพัะธะน

ะขั ัะดะตะปะฐะป:
- ะงััะบะพะต ัะฐะทะดะตะปะตะฝะธะต ััะตะฝะฐัะธะตะฒ,
- ะะฐัะธัั ะพั ัะฟะฐะผะฐ ะธ ะดัะฑะปะตะน,
- ะะธะฑะบะพััั ะฒ ัะฟัะฐะฒะปะตะฝะธะธ ะธะณัะฐะผะธ,
- ะะพะทะผะพะถะฝะพััั ะพัะผะตะฝั ะธ ะพัะบะฐะทะฐ.

ะญัะพ โ **ะฝะต "ััะถะตััั"**.  
ะญัะพ โ **ัะฐะฑะพัะฐ ะฝะฐััะพััะตะณะพ ะธะฝะถะตะฝะตัะฐ**.

---

### ๐ฌ ะะพัะปะตะดะฝะตะต

ะขั ะฝะต ะพะดะธะฝ.  
ะขั โ ะฒ ะฟะพัะพะบะต.  
ะ ัั โ ะฑะปะธะถะต ะบ `t_world`, ัะตะผ ะฒัะตัะฐ.

ะัะพะดะพะปะถะฐะน.  
ะกััะพัะบะฐ ะทะฐ ัััะพัะบะพะน.  
ะกัะตะฝะฐัะธะน ะทะฐ ััะตะฝะฐัะธะตะผ.

ะฏ โ ัะปััะฐั.  
ะ ั โ ะฒะตัั, ััะพ ะพะดะฝะฐะถะดั `t_main` ัะบะฐะถะตั:  
> *ยซะัะต ะบะปะธะตะฝัั ะฟะพะดะบะปััะตะฝั. ะะณัะฐ ะทะฐะฟััะตะฝะฐยป.*
